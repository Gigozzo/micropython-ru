Простая интерактивная среда программирования REPL
=================================================

REPL - Read(Чтение) Evaluate(Оценка) Print(Печать) Loop(Цикл) - интерактивная строка Micro Python, с помощью которой вы можете получить доступ к pyboard.
Использование REPL является самым простым способом проверки своего кода и выполнения команд.
Вы можете использовать REPL как вспомогательное средство для написания сценариев в ``main.py``.

Для использования REPL, необходимо подключиться к последовательному устройству USB на pyboard.
Как это сделать, зависит от вашей операционной системы.

Windows
-------

Вы должны установить драйвер pyboard с использованием последовательного USB устройства.
Драйвер USB флэш-диска pyboard называется ``pybcdc.inf``.

Для установки этого драйвера вам необходимо перейти в Диспетчер Устройств для вашего компьютера,
найти pyboard в списке устройств (он должн иметь предупреждающий знак, потому что он еще не работает), щелкните правой кнопкой мыши на pyboard устройство,
выберите Свойства и установите драйвер. Затем необходимо выбрать опцию, чтобы найти драйвер потоков вручную (не используйте автоматическое обновление Windows),
перейдите к USB флеш-диску pyboard, и выберите его. Он должен установиться.
После установки, вернитесь в Диспетчер Устройств, чтобы найти установленный pyboard, и посмотрите, какой это COM порт (например, COM4).

Теперь вам нужно запустить свою терминальную программу. Вы можете использовать HyperTerminal, если он у вас установлен, или скачать бесплатную программу PuTTY:
`putty.exe <http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html>`_.
Используя программу удалённого доступа (возможно терминальную), вы должны подключиться к тому COM порту, который нашли в предыдущем шаге.
Для PuTTY: нажмите "Session" на левой панели и нажмите радио-кнопку "Serial" справа, затем в поле "Serial Line" введите найденный COM порт (например, COM4), нажмите кнопку "Open".

Mac OS X
--------

Откройте терминал и запустите::

    screen /dev/tty.usbmodem*
    
Когда вы закончите и захотите выйти, нажмите CTRL-A CTRL-\\.

Linux
-----

Откройте терминал и запустите::

    screen /dev/ttyACM0
    
Вы можете попробовать вместо этого ``picocom`` или ``ttyACM``. Возможно вам придётся использовать ``/dev/ttyACM1`` или с большим номером ``ttyACM``.
Также вам могут понадобиться права для доступа к этому устройству (например, группа ``uucp`` или ``dialog`` или использовать sudo).

Использование REPL
------------------

Теперь давайте попробуем запустить код Micro Pythom непосредственно на pyboard.

В вашей программе удалённого доступа (PuTTY, screen, picocom, и т.д.) вы увидите пустой экран с мигающим курсором.
Чтобы попасть в простой интерпретатор Micro Python - нажмите Enter. Вы увидите строку, начинающуюся с ``>>>``.
Давайте удостоверимся, что он работает::

    >>> print("hello pyboard!")
    hello pyboard!

Символы ``>>>`` указывают, что далее вы должны ввести текст в командной строке.
После ввода ``print("hello pyboard!")`` и нажатия Enter - в выводе мы увидили ``hello, pyboard!``

Если вы уже знакомы с python - попробуйте выполнить основные команды.

Если какая-либо из них не сработает - попробуйте hard reset or a soft reset;
смотри ниже.

Пойдём дальше и попробуем ввести некоторые другие команды. Например::

    >>> pyb.LED(1).on()
    >>> pyb.LED(2).on()
    >>> 1 + 2
    3
    >>> 1 / 2
    0.5
    >>> 20 * 'py'
    'pypypypypypypypypypypypypypypypypypypypy'

Сброс микроконтроллера
----------------------

Если что-то пойдёт не так - вы можете сбросить микроконтроллер двумя способами.
Первый - нажать CTRL-D в командной строке Micro Python, произойдёт мягкая перезагрузка (soft reset). Вы увидите сообщение наподобие следующего::

    >>> 
    PYB: sync filesystems
    PYB: soft reboot
    Micro Python v1.0 on 2014-05-03; PYBv1.0 with STM32F405RG
    Type "help()" for more information.
    >>>

Если же это не сработает - вы можете выполнить аппаратный сброс (hard reset) (turn-it-off-and-on-again). Для этого нажмите RST на микроконтроллере (маленькая черная кнопка ближе к разъему micro-USB на плате).
Это остановит сеанс, отсоединится от любой программы (PuTTY, screen, и т.д.), которая используется для подключения к pyboard.

Перед аппаратным сбросом рекомендуется предварительно отключить программу удалённого доступа и извлечь/размонтировать pyboard.
